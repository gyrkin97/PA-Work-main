<!-- =================================================================== -->
<!-- ФАЙЛ: views/eds.html (ФИНАЛЬНАЯ ВЕРСИЯ С ИКОНКОЙ "НАЗАД")          -->
<!-- ОПИСАНИЕ: Интерфейс управления электронными подписями сотрудников  -->
<!-- ОСОБЕННОСТЬ: Унифицированный дизайн с иконкой возврата на дашборд  -->
<!-- =================================================================== -->

<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- ==================== МЕТАДАННЫЕ И ЗАГОЛОВОК ==================== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Менеджер ЭЦП | Управление электронными подписями</title>
    
    <!-- ==================== ПОДКЛЮЧЕНИЕ СТИЛЕЙ ==================== -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="/css/eds/eds.css">
    <link rel="stylesheet" href="/css/components/datepicker.css">
</head>

<body>
    <!-- ==================== ДЕКОРАТИВНЫЕ ЭЛЕМЕНТЫ ФОНА ==================== -->
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    
    <div class="pulsating-dot"></div>
    <div class="pulsating-dot"></div>
    <div class="pulsating-dot"></div>
    <div class="pulsating-dot"></div>

    <!-- ==================== ОСНОВНОЙ КОНТЕЙНЕР ==================== -->
    <div class="container">
        
        <!-- ==================== ШАПКА С ЛОГОТИПОМ И ДЕЙСТВИЯМИ ==================== -->
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-digital-tachograph"></i>
                </div>
                <div class="logo-text">
                    <h1>Менеджер ЭЦП</h1>
                    <p>Управление электронными подписями сотрудников</p>
                </div>
            </div>
            
            <div class="user-actions">
                <div class="user-profile">
                    <div class="user-avatar">
                        <span>...</span>
                    </div>
                    <div class="user-info">
                        <span class="user-name">Загрузка...</span>
                        <span class="user-role">...</span>
                    </div>
                </div>
                
                <!-- Иконка возврата на дашборд -->
                <a href="/dashboard" title="Вернуться на дашборд" class="logout-button">
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
        </header>

        <!-- ==================== СТАТИСТИЧЕСКИЕ КАРТОЧКИ ==================== -->
        <div class="stats">
            <!-- Карточка: Всего сотрудников -->
            <div class="stat-card">
                <div class="stat-icon icon-total">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalEmployees">...</h3>
                    <p>Всего сотрудников</p>
                </div>
            </div>
            
            <!-- Карточка: Активные ЭЦП -->
            <div class="stat-card">
                <div class="stat-icon icon-active">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="activeCerts">...</h3>
                    <p>Активные ЭЦП</p>
                </div>
            </div>
            
            <!-- Карточка: Скоро истекают -->
            <div class="stat-card">
                <div class="stat-icon icon-expiring">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="expiringCerts">...</h3>
                    <p>Скоро истекают (истекли)</p>
                </div>
            </div>
        </div>

        <!-- ==================== ПАНЕЛЬ УПРАВЛЕНИЯ ==================== -->
        <div class="dashboard-controls">
            <!-- Переключатель представления -->
            <div class="view-toggle">
                <button class="view-btn active" id="tableViewBtn">
                    <i class="fas fa-table"></i> Таблица
                </button>
                <button class="view-btn" id="cardsViewBtn">
                    <i class="fas fa-th-large"></i> Карточки
                </button>
            </div>
            
            <!-- Кнопка добавления сотрудника -->
            <button class="btn btn-primary" id="addEmployeeBtn">
                <i class="fas fa-plus"></i> Добавить сотрудника
            </button>
        </div>

        <!-- ==================== ОСНОВНАЯ КАРТОЧКА С ДАННЫМИ ==================== -->
        <div class="card">
            <div class="card-header">
                <h2>
                    <i class="fas fa-table"></i> Список ЭЦП сотрудников
                </h2>
            </div>
            
            <div class="card-body">
                <!-- Табличное представление -->
                <div class="table-responsive">
                    <table id="ecpTable" class="table-sortable">
                        <thead>
                            <tr>
                                <th data-sort="fio">Сотрудник</th>
                                <th data-sort="position_name">Должность</th>
                                <th data-sort="inn">ИНН</th>
                                <th data-sort="ecp_number">Номер ЭЦП</th>
                                <th data-sort="date_from">Дата выдачи</th>
                                <th data-sort="date_to">Дата окончания</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Данные будут загружены динамически -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Представление карточками -->
                <div class="cards-view" id="cardsView">
                    <!-- Карточки будут загружены динамически -->
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== МОДАЛЬНОЕ ОКНО ДОБАВЛЕНИЯ/РЕДАКТИРОВАНИЯ ==================== -->
    <div id="employeeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Добавить сотрудника</h2>
                <button class="close-btn" id="closeModalBtn">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="employeeForm">
                    <!-- Поле: ФИО -->
                    <div class="form-group">
                        <label for="fio">ФИО:</label>
                        <input type="text" id="fio" class="form-control" required>
                    </div>
                    
                    <!-- Поле: Должность -->
                    <div class="form-group">
                        <label for="position">Должность:</label>
                        <select id="position" class="form-control" required>
                            <option value="">Выберите должность</option>
                            <option value="technician-metrologist">Техник-метролог</option>
                            <option value="metrology-engineer">Инженер по метрологии</option>
                            <option value="lab-head">Начальник лаборатории</option>
                        </select>
                    </div>
                    
                    <!-- Поле: ИНН -->
                    <div class="form-group">
                        <label for="inn">ИНН:</label>
                        <input type="text" id="inn" class="form-control" required pattern="\d{10,12}">
                    </div>
                    
                    <!-- Поле: Номер ЭЦП -->
                    <div class="form-group">
                        <label for="ecpNumber">Номер ЭЦП:</label>
                        <input type="text" id="ecpNumber" class="form-control" required>
                    </div>
                    
                    <!-- Группа полей: Срок действия -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="dateFrom">Срок действия от:</label>
                            <div class="calendar-wrapper">
                                <input type="text" id="dateFrom" class="form-control datepicker datepicker-input" required>
                                <i class="fas fa-calendar-alt calendar-icon"></i>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="dateTo">Срок действия до:</label>
                            <div class="calendar-wrapper">
                                <input type="text" id="dateTo" class="form-control datepicker datepicker-input" required>
                                <i class="fas fa-calendar-alt calendar-icon"></i>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-primary" id="saveBtn">Сохранить</button>
            </div>
        </div>
    </div>

    <!-- ==================== МОДАЛЬНОЕ ОКНО ПОДТВЕРЖДЕНИЯ ==================== -->
    <div class="modal-overlay" id="confirmModal" style="z-index: 5000;">
        <div class="modal-dialog">
            <h2 class="modal-title" id="confirmModalTitle">Подтверждение</h2>
            
            <div class="modal-body">
                <p id="confirmModalText">Вы уверены?</p>
                
                <!-- Дополнительное поле ввода (скрыто по умолчанию) -->
                <div id="confirmModalInputWrapper" class="hidden" style="margin-top: 15px;">
                    <input type="text" id="confirmModalInput" class="form-control" placeholder="">
                </div>
            </div>
            
            <div class="modal-footer" style="justify-content: center;">
                <button class="btn btn-outline" id="confirmModalCancelBtn">Отмена</button>
                <button class="btn" id="confirmModalOkBtn">OK</button>
            </div>
        </div>
    </div>

    <!-- ==================== ПОДКЛЮЧЕНИЕ СКРИПТОВ ==================== -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="/js/utils/global-toaster.js"></script>
    <script type="module" src="/js/eds/main.js"></script>
</body>
</html>