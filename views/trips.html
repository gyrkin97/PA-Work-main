<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä–∞—Ñ–∏–∫ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ–∫</title>
    
    <!-- –ò–∫–æ–Ω–∫–∏ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- –ú–æ–¥—É–ª—å–Ω—ã–µ CSS —Ñ–∞–π–ª—ã -->
    <link rel="stylesheet" href="/css/trips/_base.css">
    <link rel="stylesheet" href="/css/trips/header.css">
    <link rel="stylesheet" href="/css/trips/calendar.css">
    <link rel="stylesheet" href="/css/trips/modals-core.css">
    <link rel="stylesheet" href="/css/trips/modal-trip-form.css">
    <link rel="stylesheet" href="/css/trips/modal-profile.css">
    <link rel="stylesheet" href="/css/trips/modal-management.css">
    <link rel="stylesheet" href="/css/trips/tooltips.css">
    <link rel="stylesheet" href="/css/trips/modal-stats.css">
    <link rel="stylesheet" href="/css/trips/geography-modal.css">
    <link rel="stylesheet" href="/css/trips/modal-trip-history.css">
    <link rel="stylesheet" href="/css/trips/modal-all-trips.css">
    <link rel="stylesheet" href="/css/trips/modal-vacations.css">
    
    <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å -->
    <link rel="stylesheet" href="/css/components/datepicker.css">

    <!-- –°—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
<body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="pulsating-dot"></div>
    <div class="pulsating-dot"></div>
    <div class="pulsating-dot"></div>
    <div class="pulsating-dot"></div>
    
    <div class="container">
        <!-- –®–∞–ø–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
        <header class="new-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-plane-departure"></i>
                </div>
                <div class="logo-text">
                    <h1>–ì—Ä–∞—Ñ–∏–∫ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ–∫</h1>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–µ–∑–¥–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</p>
                </div>
            </div>
            
            <div class="user-actions">
                <button class="btn btn-secondary" id="export-btn">
                    <i class="fas fa-file-export"></i> –≠–∫—Å–ø–æ—Ä—Ç
                </button>
                
                <div class="user-profile" id="user-profile-button">
                    <div class="user-avatar">
                        <span>...</span>
                    </div>
                    <div class="user-info">
                        <span class="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        <span class="user-role">...</span>
                    </div>
                </div>
                
                <a href="/dashboard" title="–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –¥–∞—à–±–æ—Ä–¥" class="logout-button">
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
        <div id="export-area">
            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
            <div class="navigation">
                <div class="month-navigation">
                    <button id="prev-month" title="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <div class="month-picker-container">
                        <div class="current-month" id="month-picker-trigger">
                            –û–∫—Ç—è–±—Ä—å 2025 –≥.
                        </div>
                        <div class="month-year-picker" id="month-year-picker">
                            <div class="picker-header">
                                <button id="picker-prev-year">‚Äπ</button>
                                <span id="picker-year">2025</span>
                                <button id="picker-next-year">‚Ä∫</button>
                            </div>
                            <div class="picker-months-grid" id="picker-months-grid"></div>
                        </div>
                    </div>
                    
                    <button id="next-month" title="–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary" id="show-stats-btn">
                        <i class="fas fa-chart-pie"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    </button>
                    <button class="btn btn-secondary" id="manage-vacations-btn">
                        <i class="fas fa-umbrella-beach"></i> –û—Ç–ø—É—Å–∫
                    </button>
                    <button class="btn btn-secondary" id="manage-employees-btn">
                        <i class="fas fa-users"></i> –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
                    </button>
                    <button class="btn btn-secondary" id="manage-organizations-btn">
                        <i class="fas fa-building"></i> –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
                    </button>
                    <button class="btn btn-primary" id="add-trip-btn">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –≤—ã–µ–∑–¥
                    </button>
                </div>
            </div>

            <!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="schedule-container">
                <div class="schedule-header" id="schedule-header-grid"></div>
                <div class="schedule-body-wrapper" id="schedule-body-wrapper">
                    <div class="schedule-body" id="schedule-body-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∏ -->
    <div class="modal" id="trip-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="trip-modal-title">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫—É</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="trip-form" data-editing-trip-id="">
                    <div class="trip-form-container">
                        <div class="form-section">
                            <div class="section-title">
                                <i class="fas fa-users"></i> –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
                            </div>
                            <div class="counter">
                                –í—ã–±—Ä–∞–Ω–æ: <span id="selected-count">0</span> –∏–∑ 4
                            </div>
                            <div class="employees-container" id="employees-container"></div>
                            <div class="hint">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 4 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –Ω–∞–∂–∏–º–∞—è –Ω–∞ –Ω–∏—Ö</div>
                            <div class="error" id="employee-error">
                                –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ 4 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <div class="section-title">
                                <i class="fas fa-building"></i> –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
                            </div>
                            <div class="search-container">
                                <input type="text" id="organization-search" 
                                       placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏">
                                <div class="organization-options" id="organization-options"></div>
                            </div>
                            <input type="hidden" id="organization" value="">
                        </div>
                        
                        <div class="form-section">
                            <label for="destination">–ú–µ—Å—Ç–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</label>
                            <input type="text" id="destination" placeholder="–ì–æ—Ä–æ–¥">
                        </div>
                        
                        <div class="form-section">
                            <label>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</label>
                            <div class="transport-options">
                                <button type="button" class="transport-option" 
                                        data-transport="car" data-tooltip="–ê–≤—Ç–æ–º–æ–±–∏–ª—å">
                                    <i class="fas fa-car"></i>
                                </button>
                                <button type="button" class="transport-option" 
                                        data-transport="train" data-tooltip="–ü–æ–µ–∑–¥">
                                    <i class="fas fa-train"></i>
                                </button>
                                <button type="button" class="transport-option" 
                                        data-transport="plane" data-tooltip="–°–∞–º–æ–ª–µ—Ç">
                                    <i class="fas fa-plane"></i>
                                </button>
                            </div>
                            <input type="hidden" id="transport" value="">
                        </div>
                        
                        <div class="form-section">
                            <div class="date-fields">
                                <div class="date-field">
                                    <label for="start-date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                                    <div class="calendar-wrapper">
                                        <input type="text" class="datepicker-input datepicker" id="start-date">
                                        <span class="calendar-icon">üìÖ</span>
                                    </div>
                                </div>
                                <div class="date-field">
                                    <label for="end-date">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                                    <div class="calendar-wrapper">
                                        <input type="text" class="datepicker-input datepicker" id="end-date">
                                        <span class="calendar-icon">üìÖ</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-full">
                            <i class="fas fa-plus"></i>
                            <span class="btn-text">–î–æ–±–∞–≤–∏—Ç—å –í—ã–µ–∑–¥</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ -->
    <div class="modal" id="employee-card-modal">
        <div class="modal-content employee-profile">
            <div class="employee-card">
                <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
                <div class="sidebar">
                    <button class="close-btn">&times;</button>
                    <div class="avatar" id="profile-avatar-new">--</div>
                    <div class="employee-name" id="profile-name-new">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <div class="employee-position" id="profile-position-new">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    
                    <div class="contact-info">
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div>
                                <div style="font-size: 13px; opacity: 0.9;">–¢–µ–ª–µ—Ñ–æ–Ω</div>
                                <div style="font-weight: 500;" id="profile-phone-new">–ù–µ —É–∫–∞–∑–∞–Ω</div>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div>
                                <div style="font-size: 13px; opacity: 0.9;">E-mail</div>
                                <div style="font-weight: 500;" id="profile-email-new">–ù–µ —É–∫–∞–∑–∞–Ω</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-sidebar">
                        <div class="level-badge" id="level-card-trigger">
                            <div class="stat-sidebar-label">–£—Ä–æ–≤–µ–Ω—å</div>
                            <div class="stat-sidebar-value" style="gap: 8px;">
                                <i class="fas fa-chart-line"></i>
                                <span id="profile-level-badge">1</span>
                            </div>
                        </div>
                        
                        <div class="experience-badge">
                            <div class="stat-sidebar-label">–°—Ç–∞–∂</div>
                            <div class="stat-sidebar-value" style="gap: 8px;">
                                <i class="fas fa-calendar-alt"></i>
                                <div class="value-text">
                                    <span class="value-number" id="profile-tenure-value">–ù/–î</span>
                                    <span class="value-unit" id="profile-tenure-unit"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="top-rating">
                            <div class="top-rating-content">
                                <div class="stat-sidebar-label">–¢–û–ü –†–ï–ô–¢–ò–ù–ì</div>
                                <div class="stat-sidebar-value">
                                    <span class="value-number">1</span>
                                    <span class="value-unit">–ú–ï–°–¢–û</span>
                                </div>
                            </div>
                            <div class="trophy-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
                <div class="main-content">
                    <div class="status-section">
                        <div class="status-card" id="current-status-card"></div>
                        <div class="upcoming-card" id="upcoming-trip-card"></div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card" id="businessTripsStat">
                            <div class="stat-value" id="stats-total-trips-new">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ–∫</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stats-total-days-new">0</div>
                            <div class="stat-label">–î–Ω–µ–π –≤ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∞—Ö</div>
                        </div>
                    </div>
                    
                    <div class="progress-section">
                        <div class="section-title">
                            <i class="fas fa-chart-line"></i>–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π
                        </div>
                        <div class="level-system">
                            <div class="level-overview">
                                <div class="current-level-card" id="level-card-trigger">
                                    <div class="level-number" id="level-card-number">...</div>
                                    <div class="level-name" id="level-card-name">...</div>
                                </div>
                                <div class="progress-container">
                                    <div class="progress-info">
                                        <div class="progress-text">–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è</div>
                                        <div class="progress-days" id="level-progress-text-new">
                                            <i class="fas fa-calendar-day"></i>...
                                        </div>
                                    </div>
                                    <div class="progress-bar-container">
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="level-progress-fill-new"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="achievements-section">
                        <div class="section-title">
                            <i class="fas fa-trophy"></i>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                        </div>
                        <div class="achievements-container" id="achievements-container-new"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ -->
    <div class="modal" id="employees-modal">
        <div class="modal-content wide">
            <div class="modal-header">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body employees-management">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="employee-list-title">–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                    </div>
                    <div class="search-container">
                        <input type="text" class="search-input" id="employee-search-input" 
                               placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û –∏–ª–∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏...">
                    </div>
                    <div class="search-results-info" id="employees-count"></div>
                    <div class="employees-container">
                        <div class="employees-list" id="employees-list-managed"></div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h3>
                    </div>
                    <div class="form-container">
                        <form id="employee-form-managed">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="employee-form-last-name" class="form-label">–§–∞–º–∏–ª–∏—è</label>
                                    <input type="text" id="employee-form-last-name" class="form-control" 
                                           placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é" required maxlength="100">
                                </div>
                                <div class="form-group">
                                    <label for="employee-form-first-name" class="form-label">–ò–º—è</label>
                                    <input type="text" id="employee-form-first-name" class="form-control" 
                                           placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" required maxlength="100">
                                </div>
                                <div class="form-group">
                                    <label for="employee-form-patronymic" class="form-label">–û—Ç—á–µ—Å—Ç–≤–æ</label>
                                    <input type="text" id="employee-form-patronymic" class="form-control" 
                                           placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç—á–µ—Å—Ç–≤–æ" maxlength="100">
                                </div>
                                <div class="form-group">
                                    <label for="employee-form-phone" class="form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                                    <input type="tel" id="employee-form-phone" class="form-control" 
                                           placeholder="+7 (XXX) XXX-XX-XX">
                                </div>
                                <div class="form-group">
                                    <label for="employee-form-email" class="form-label">E-mail</label>
                                    <input type="email" id="employee-form-email" class="form-control" 
                                           placeholder="pochta@pribor.ru">
                                </div>
                                <div class="form-group">
                                    <label for="employee-form-hire-date" class="form-label">–î–∞—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—É</label>
                                    <div class="calendar-wrapper">
                                        <input type="text" class="datepicker-input datepicker" id="employee-form-hire-date">
                                        <span class="calendar-icon">üìÖ</span>
                                    </div>
                                </div>
                                <div class="form-group full-width">
                                    <label for="employee-form-position" class="form-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                                    <select id="employee-form-position" class="form-control" required>
                                        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å</option>
                                        <option value="–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –º–µ—Ç—Ä–æ–ª–æ–≥–∏–∏">–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –º–µ—Ç—Ä–æ–ª–æ–≥–∏–∏</option>
                                        <option value="–¢–µ—Ö–Ω–∏–∫ –º–µ—Ç—Ä–æ–ª–æ–≥">–¢–µ—Ö–Ω–∏–∫ –º–µ—Ç—Ä–æ–ª–æ–≥</option>
                                        <option value="–ù–∞—á. –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏">–ù–∞—á. –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏</option>
                                    </select>
                                </div>
                                
                                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ -->
                                <div class="form-group full-width employee-status-toggle">
                                    <div class="status-toggle-wrapper">
                                        <div class="status-info">
                                            <label class="status-label">–°—Ç–∞—Ç—É—Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</label>
                                            <p class="status-description">–û—Ç–º–µ—Ç—å—Ç–µ, –µ—Å–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —É–≤–æ–ª–µ–Ω</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="employee-form-fired">
                                            <span class="toggle-slider"></span>
                                        </label>
                                        <span class="status-text" id="employee-status-text">–†–∞–±–æ—Ç–∞–µ—Ç</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="error-message" id="employee-duplicate-error" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" 
                                     fill="none" stroke="currentColor" stroke-width="2" 
                                     stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="8" x2="12" y2="12"></line>
                                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                </svg>
                                <span>–°–æ—Ç—Ä—É–¥–Ω–∏–∫ —Å —Ç–∞–∫–∏–º –§–ò–û —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</span>
                            </div>
                            
                            <div class="button-group-single">
                                <button type="submit" class="btn btn-add-full">
                                    <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                                </button>
                                <button type="button" class="btn btn-cancel-edit" 
                                        id="cancel-edit-btn" style="display: none;">
                                    –û—Ç–º–µ–Ω–∞
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ -->
    <div class="modal" id="organizations-modal">
        <div class="modal-content wide">
            <div class="modal-header">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body organizations-management">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">–°–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π</h3>
                    </div>
                    <div class="search-container">
                        <input type="text" class="search-input" id="org-search-input" 
                               placeholder="–ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π...">
                    </div>
                    <div class="search-results-info" id="org-search-results-info"></div>
                    <div class="organizations-container">
                        <ul class="organizations-list" id="organizations-list-managed"></ul>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="org-form-title">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é</h3>
                    </div>
                    <div class="form-container org-add-section">
                        <form id="organization-form-managed">
                            <div class="form-group">
                                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</label>
                                <input type="text" class="form-input" id="org-form-name" 
                                       placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" required>
                                <div class="error-message" id="org-name-error" style="display: none;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" 
                                         fill="none" stroke="currentColor" stroke-width="2" 
                                         stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="8" x2="12" y2="12"></line>
                                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                    </svg>
                                    <span id="org-error-text"></span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ–º—ã–π —Ü–≤–µ—Ç</label>
                                <div class="color-preview">
                                    <div class="preview-dot" id="org-color-preview"></div>
                                    <div class="preview-text" id="org-color-text">
                                        –¶–≤–µ—Ç –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                                    </div>
                                </div>
                            </div>
                            
                            <div class="button-group-single">
                                <button type="submit" class="btn btn-add-full" id="org-submit-button">
                                    <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
                                </button>
                                <button type="button" class="btn-cancel-edit" id="org-cancel-edit-btn" style="display: none;">
                                    –û—Ç–º–µ–Ω–∞
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ–π—Å—Ç–≤–∏–π —Å –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–æ–π -->
    <div class="modal" id="trip-actions-modal">
        <div class="modal-content trip-details-modal">
            <div class="trip-details-header">
                <div class="trip-details-title" id="trip-details-title">...</div>
                <div class="trip-details-subtitle" id="trip-details-subtitle">
                    –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–µ
                </div>
                <button class="close-btn">&times;</button>
            </div>
            
            <div class="trip-details-body">
                <div class="trip-info">
                    <div class="info-item">
                        <div class="info-label" id="trip-details-org-label">–ó–∞–∫–∞–∑—á–∏–∫</div>
                        <div class="info-value" id="trip-details-organization">...</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</div>
                        <div class="info-value" id="trip-details-start-date">...</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</div>
                        <div class="info-value" id="trip-details-end-date">...</div>
                    </div>
                </div>
            </div>
            
            <div class="trip-details-footer">
                <button class="btn btn-edit" id="edit-trip-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn btn-delete" id="delete-trip-btn">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    <div class="modal" id="confirmation-modal">
        <div class="modal-content confirmation">
            <div class="confirmation-header">
                <div class="confirmation-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
            </div>
            <div class="confirmation-body">
                <div class="confirmation-text" id="confirmation-text"></div>
            </div>
            <div class="confirmation-footer">
                <button class="btn btn-cancel" id="cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-delete" id="confirm-btn">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–∏—Å—Ç–µ–º—ã —É—Ä–æ–≤–Ω–µ–π -->
    <div class="modal" id="levels-modal">
        <div class="modal-content" style="max-width: 420px;">
            <div class="modal-header">
                <h2 class="modal-title">–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div id="levels-tooltip-content">
                    <div class="level level-1">
                        <div class="icon">1</div>
                        <div class="content">
                            <div class="name">–°—Ç–∞–∂–µ—Ä –ø–æ–ª–µ–≤—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π</div>
                            <div class="days">1-44 –¥–Ω.</div>
                        </div>
                    </div>
                    <div class="level level-2">
                        <div class="icon">2</div>
                        <div class="content">
                            <div class="name">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –≤—ã–µ–∑–¥–Ω–æ–π –ø–æ–≤–µ—Ä–∫–∏</div>
                            <div class="days">45-88 –¥–Ω.</div>
                        </div>
                    </div>
                    <div class="level level-3">
                        <div class="icon">3</div>
                        <div class="content">
                            <div class="name">–û–ø—ã—Ç–Ω—ã–π –ø–æ–ª–µ–≤–∏–∫</div>
                            <div class="days">89-132 –¥–Ω.</div>
                        </div>
                    </div>
                    <div class="level level-4">
                        <div class="icon">4</div>
                        <div class="content">
                            <div class="name">–ú–∞—Å—Ç–µ—Ä –ø–æ–ª–µ–≤–æ–π –ø–æ–≤–µ—Ä–∫–∏</div>
                            <div class="days">133-176 –¥–Ω.</div>
                        </div>
                    </div>
                    <div class="level level-5">
                        <div class="icon">5</div>
                        <div class="content">
                            <div class="name">–í–µ—Ç–µ—Ä–∞–Ω –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ–∫</div>
                            <div class="days">177+ –¥–Ω.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div class="modal" id="stats-modal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-chart-bar"></i> –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ–∫
                </h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body stats-body" id="stats-modal-body"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏ -->
    <div class="modal" id="geography-modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-globe-americas"></i> –ì–µ–æ–≥—Ä–∞—Ñ–∏—è –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ–∫
                </h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body geo-body" id="geography-modal-body"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ–∫ -->
    <div class="modal" id="trip-history-modal">
        <div class="modal-content trip-history">
            <div class="modal-header">
                <h2 id="trip-history-title">–í—Å–µ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∏</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body" id="trip-history-body">
                <div class="trip-history-filters">
                    <div class="filter-item">
                        <label for="history-status-filter">–°—Ç–∞—Ç—É—Å</label>
                        <select id="history-status-filter">
                            <option value="all">–í—Å–µ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∏</option>
                            <option value="current">–¢–µ–∫—É—â–∞—è</option>
                            <option value="upcoming">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ</option>
                            <option value="completed">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label for="history-year-filter">–ì–æ–¥</label>
                        <select id="history-year-filter"></select>
                    </div>
                </div>
                <div class="trip-list-container" id="trip-history-list"></div>
                <div class="trip-history-summary" id="trip-history-summary"></div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ–∫ –∫–æ–º–ø–∞–Ω–∏–∏ -->
    <div class="modal" id="all-trips-modal">
        <div class="modal-content all-trips">
            <div class="modal-header">
                <h2 id="all-trips-title">–í—Å–µ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∏</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body" id="all-trips-body">
                <div class="all-trips-filters">
                    <div class="filter-item">
                        <label for="all-trips-status-filter">–°—Ç–∞—Ç—É—Å</label>
                        <div class="select-wrapper">
                            <select id="all-trips-status-filter">
                                <option value="all">–í—Å–µ</option>
                                <option value="upcoming">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ</option>
                                <option value="current">–¢–µ–∫—É—â–∏–µ</option>
                                <option value="completed">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</option>
                            </select>
                        </div>
                    </div>
                    <div class="filter-item">
                        <label for="all-trips-employee-filter">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                        <div class="custom-select-wrapper">
                            <div class="custom-select" id="all-trips-employee-filter" data-value="all">
                                <div class="custom-select__trigger">
                                    <span>–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</span>
                                    <div class="arrow"></div>
                                </div>
                                <div class="custom-options">
                                    <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="all-trips-list-container" id="all-trips-list"></div>
                <div class="all-trips-summary" id="all-trips-summary"></div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–ø—É—Å–∫–æ–≤ -->
    <div class="modal" id="vacations-modal">
        <div class="vacation-modal-content">
            <div class="modal-header">
                <button class="modal-close-btn" type="button">
                    <i class="fas fa-times"></i>
                </button>
                <h2 class="modal-title">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞</h2>
                <p class="modal-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–ø—É—Å–∫–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</p>
                <div class="palm-decoration">üå¥</div>
            </div>
            <div class="modal-body">
                <form id="vacation-form">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-user"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ
                        </h3>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-user-check"></i> –í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –Ω–∞–π–¥–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                            </label>
                            <div class="custom-combobox-wrapper">
                                <div class="custom-combobox" id="vacation-employee-select" data-value="">
                                    <div class="custom-combobox__trigger">
                                        <input type="text" id="vacation-employee-search" 
                                               placeholder="-- –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ --" autocomplete="off">
                                        <div class="arrow"></div>
                                    </div>
                                    <div class="custom-options">
                                        <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-calendar-alt"></i> –ü–µ—Ä–∏–æ–¥ –æ—Ç–ø—É—Å–∫–∞
                        </h3>
                        <div class="date-inputs">
                            <div class="form-group">
                                <label for="vacation-start-date" class="form-label">
                                    <i class="fas fa-plane-departure"></i> –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
                                </label>
                                <div class="calendar-wrapper">
                                    <input type="text" class="datepicker-input datepicker" id="vacation-start-date">
                                    <span class="calendar-icon">üìÖ</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="vacation-end-date" class="form-label">
                                    <i class="fas fa-plane-arrival"></i> –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
                                </label>
                                <div class="calendar-wrapper">
                                    <input type="text" class="datepicker-input datepicker" id="vacation-end-date">
                                    <span class="calendar-icon">üìÖ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block" style="margin-top: 25px;">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—É—Å–∫
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ -->
    <div id="trip-tooltip-modern" class="tooltip-modern" style="display: none;">
        <div class="modern-header">
            <div class="location-icon"></div>
            <div class="modern-title">
                <h3 id="tooltip-modern-destination">...</h3>
                <div class="subtitle">–ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∞</div>
            </div>
            <span id="tooltip-modern-status" class="modern-status">...</span>
        </div>
        <div class="modern-grid">
            <div class="modern-item modern-organization">
                <div class="modern-label">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</div>
                <div class="modern-value" id="tooltip-modern-organization">...</div>
            </div>
            <div class="modern-item modern-partner" id="tooltip-modern-partner-block" style="display: none;">
                <div class="modern-label">–£—á–∞—Å—Ç–Ω–∏–∫–∏</div>
                <div class="partner-info-container" id="partner-info-container"></div>
            </div>
            <div class="modern-item">
                <div class="modern-label">–ù–∞—á–∞–ª–æ</div>
                <div class="modern-value" id="tooltip-modern-start-date">...</div>
            </div>
            <div class="modern-item">
                <div class="modern-label">–û–∫–æ–Ω—á–∞–Ω–∏–µ</div>
                <div class="modern-value" id="tooltip-modern-end-date">...</div>
            </div>
            <div class="modern-item modern-duration">
                <div class="modern-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                <div class="modern-value" id="tooltip-modern-duration">...</div>
            </div>
        </div>
    </div>
    
    <div id="simple-tooltip" class="simple-tooltip"></div>

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="/js/utils/global-toaster.js"></script>
    <script type="module" src="/js/components/datepicker.js"></script>
    <script type="module" src="/js/trips/main.js"></script>
</body>
</html>